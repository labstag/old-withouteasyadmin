{% import "macro.html.twig" as macro_site %}
<section id="{{ paragraph|paragraph_id }}" class="{{ paragraph|paragraph_class }}">
	{% for post in pagination %}
		<div class="post-data">
			<h2 class="post-title">
				<a href="{{ path('front_article', {'slug': post.slug}) }}">
					{{ post.title }}
				</a>
			</h2>
			{% set img = attachment(post.img) %}
			{% if img is not null and img.name is not null %}
				<picture class="post-img">
					<img loading="lazy" alt="{{ post.title|e('html_attr') }}" src="{{ asset(img.name) | imagefilter('my_thumb') }}"/>
				</picture>
			{% endif %}
			<div class="post-date">
				{{ 'post.infodateuser'|trans(
                    {
                        '%date%': post.published|format_datetime(pattern=formatdatetime.front),
                        '%user%': macro_site.user(post.refuser, path('front_article_user', {'username': post.refuser.username}))
                    }
                )|raw }}
				{% set state = 'gestion_post_edit'|guard_route %}
				{% if state == true %}
					<a href="{{ path('gestion_post_edit', {'id': post.id}) }}" target="_blank">{{ 'post.update'|trans }}</a>
				{% endif %}
			</div>
			<div class="post-content">
				{{ post.content|raw }}
			</div>
			<div class="post-libcat">
				{% for libelle in post.libelles %}
					<a href="{{ path('front_article_libelle', {'slug' : libelle.slug}) }}" class="post-libelle">{{ libelle }}</a>
				{% endfor %}
			</div>
			<div class="post-libcat">
				{% if post.refcategory %}
					<a href="{{ path('front_article_category', {'slug': post.refcategory.slug}) }}" class="post-category">{{ post.refcategory }}</a>
				{% endif %}
			</div>
		</div>
	{% endfor %}
	{% if pagination is defined %}
		{{ knp_pagination_render(pagination) }}
	{% endif %}
</section>