{% set state1 = 'api_guard_route'|guard_route %}
{% set state2 = 'api_guard_routegroup'|guard_route %}
{% set state3 = 'api_guard_routesetgroup'|guard_route %}
{% set state = state1 and state2 and state3 %}
{% if state1 == false %}
    {{ 'guard.lost'|trans({}, 'gestion.messages') }}
{% else %}
    <table is="guard-route" data-url="{{ path('api_guard_route', {'group' : group.id}) }}" data-refresh=0>
        <thead>
            <tr>
                <th rowspan=2>
                    {{ 'guard.route'|trans({}, 'gestion.messages') }}
                </th>
                <th>
                    {{ group.name }}
                </th>
            </tr>
            <tr>
                <th>
                    {% if 'superadmin' != group.code %}
                        {% embed "embed/guard/changeroute.html.twig" with {
                            state: 0,
                            url: path('api_guard_routegroup', {'group' : group.id}),
                            token: csrf_token('guard')
                        } %}{% endembed %}
                    {% else %}
                        ----
                    {% endif %}
                </th>
            </tr>
        </thead>
        <tbody>
        {% for route in routes %}
            <tr>
                <td>
                    {{ route.name }}
                </td>
                <td>
                    {% if 'superadmin' != group.code %}
                        {% embed "embed/guard/setroute.html.twig" with {
                            title: group.name|e('html_attr'),
                            state: 0,
                            groupe: group.code|e('html_attr'),
                            route: route.name|e('html_attr'),
                            url: path('api_guard_routesetgroup', {'group' : group.id, 'route': route.id}),
                            token: csrf_token('guard')
                        } %}{% endembed %}
                    {% else %}
                        ---
                    {% endif %}
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="2" class="text-center">{{ 'norecord'|trans({}, 'gestion.messages') }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endif %}